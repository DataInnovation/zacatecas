<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Periódico Oficial del Gobierno del Estado de Zacatecas</title>
<meta name="description" content="Here goes description" />
<meta name="author" content="author name" />
<link rel="shortcut icon" href="../images/favicon.ico"
	type="image/x-icon" />

<!-- Mobile Specific Meta -->
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1" />

<!-- Style CSS -->
<link rel="stylesheet" href="../css/font-awesome.min.css" />
<link rel="stylesheet" href="../css/owl-carousel.css" />
<link rel="stylesheet" href="../css/bootstrap.css" />
<link rel="stylesheet" href="../css/datepicker.css" />
<link rel="stylesheet" href="../css/add-date.css" />
<link rel="stylesheet" href="../css/animate.css" />
<link rel="stylesheet" href="../css/icomoon.css" />
<link rel="stylesheet" href="../css/screen.css" />
<link rel="stylesheet" href="../css/align.css" />
</head>
<body data-smooth-scroll="on">
	<!-- Page Wrapper -->
        <div class="page">
            <body onload="header('busqueda')">
                <header>
                	<div class = "container">
                		<div class = "row">
                <!-- Brand -->
                			<div class = "col-xs-12 col-md-6">
                				<div class = "brand"> <a href = "index.html"> <img src = "../img/brand.png" alt = "brand" /> </a>
                				</div> 
                			</div> <!-- Nav -->
                			<div class = "col-xs-12 col-md-18">
								<nav id="menu">
								<i class = "responsive-menu-trigger icon-menu"></i> 
								</nav>
							</div> 
						</div> 
					</div>
                </header>
			<!-- Blog Section -->
			<section class="blog-section">
				<!-- Section Header -->
				<div class="section-header inverted inverted-all">
					<div class="container">
						<h1>Busqueda de Información</h1>
						<p>Ingrese los datos que considere necesarios para iniciar la
							búsqueda de Leyes.</p>
					</div>
				</div>

				<!-- Body -->
				<div class="blog-section-wrapper">
					<div class="container">
						<div class="blog-content">
							<div class="row">
								<div class="col-xs-22 col-xs-offset-1">
									<div class="simple-template-form">
										<h4 class="caption">Puede realizar su búsqueda por:</h4>

										<form class="respond-form" id="dataForm" name="dataForm"
											onsubmit="return false">

											<div class="row">

												<div class="col-sm-12">
													<select class="input-line js-input" name="categoria">
														<option disabled selected>Categoria:</option>
														<option value="LeyesEstatales">Leyes Estatales</option>
														<option value="ReglamentosEstatales">Reglamentos
															Estatales</option>
														<option value="Codigos">Codigos</option>
														<option value="BandosPoliciaybuenGobierno">Bandos
															Policia y Buen Gobierno Municipal</option>
														<option value="LeyesReglamentarias">Leyes
															Reglamentarias</option>
														<option value="ReglamentosMunicipales">ReglamentosMunicipales</option>

													</select>
												</div>
											</div>

											<div class="row">

												<div class="col-sm-12">
													<input class="input-line js-input" type="text"
														name="descripcion" placeholder="Descripcion:" />
												</div>

											</div>

											<div class="submit-button">
												<input type="submit" value="Buscar"
													onclick="makeCorsRequest('http://periodicooficial.zacatecas.gob.mx:9000/busqueda/leyes','lista','dataForm')" />
												<i class="icon icon-search"></i>
											</div>

											<div class="submit-button">
												<input type="button" value="Siguiente"
													onclick="window.location.href='../busqueda-leyes/'" /> <i
													class="icon icon-pencil"></i>
											</div>

										</form>
									</div>
								</div>
								<div class="col-xs-22 col-xs-offset-1">
									<div class="row">
										<div class="col-md-14 col-lg-24">
											<h4 id="resultado">Resultados encontrados</h4>
										</div>
										<div class="row center">
											<button onclick="primeraPag('lista')">
												<img src="../img/first.png" />
											</button>
											<button onclick="anteriorPag('lista')">
												<img src="../img/previous.png" />
											</button>
											<input type="number" style="width: 40px; height: 15px"
												size="3" min="1" maxlength="3" id="indiceP" placeholder="1"
												value="" onChange="indicePag('lista',indiceP);" />

											<button onclick="siguientePag('lista')">
												<img src="../img/nextt.png" />
											</button>
											<button onclick="ultimaPag('lista')">
												<img src="../img/last.png" />
											</button>
										</div>
									</div>
									<div class="services-list-header">
										<div class="row row-fit">
											<div class="col-sm-5">
												<h4>Categoria</h4>
											</div>
											<div class="col-sm-9">
												<h4>Descripcion</h4>
											</div>
											<div class="col-sm-5">
												<h4>Vigencia</h4>
											</div>
											<div class="col-sm-5">
												<h4>Descargar</h4>
											</div>
										</div>
									</div>


									<div class="services-list" id="lista"></div>

								</div>
							</div>

						</div>
					</div>
				</div>

			</section>
			<div id="footer">
				
			</div>
	</div>

	<script language="javascript">
		function slctr(texto, valor) {
			this.texto = texto
			this.valor = valor
		}
	</script>
	<!-- Scripts -->
	<script src="../js/insert/header.js"></script>
	<script src="../js/insert/header.js"></script>
	<script src="../js/cookies/cookies.js"></script>
	<script src="../js/jquery.js"></script>
	<script src="../js/modernizr.js"></script>
	<script src="../js/smooth-scroll.js"></script>
	<script src="../js/jquery-ui.js"></script>
	<script src="../js/images.js"></script>
	<script src="../js/isotope.js"></script>
	<script src="../js/bootstrap.js"></script>
	<script src="../js/bootstrap-datepicker.js"></script>
	<script src="../js/owl-carousel.js"></script>
	<script src="../js/visible.js"></script>
	<script src="../js/knob.js"></script>
	<script src="../js/options.js"></script>
	<script src="../js/municipios/municipios.js"></script>
	<script src="../js/descargas/descargas.js"></script>
	<script src="../js/table/pagBusquedaLeyes.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {

			$('.date').datepicker({
				format : "yyyy-mm-dd",
				endDate : "Today",
				language : "es",
				daysOfWeekDisabled : "0",
				autoclose : true,
				orientation : "top auto"
			});

		});
		for (x = 0; x < Municipios.length; x++) {

			var nuevaOpcion = new Option(Municipios[x].texto);
			document.dataForm.municipio.options[x] = nuevaOpcion;
			if (x == 0) {
				document.dataForm.municipio.options[x].value = Municipios[x].valor;
			} else {
				document.dataForm.municipio.options[x].value = Municipios[x].texto;
			}

		}

		function createCORSRequest(method, url) {
			var xhr = new XMLHttpRequest();
			if ("withCredentials" in xhr) {
				// Check if the XMLHttpRequest object has a "withCredentials" property.
				// "withCredentials" only exists on XMLHTTPRequest2 objects.
				xhr.open(method, url, true);
			} else if (typeof XDomainRequest != "undefined") {
				// Otherwise, check if XDomainRequest.
				// XDomainRequest only exists in IE, and is IE's way of making CORS requests.
				xhr = new XDomainRequest();
				xhr.open(method, url);
			} else {
				// Otherwise, CORS is not supported by the browser.
				xhr = null;
			}
			return xhr;
		}

		function makeCorsRequest(url, id, form) {
			var xhr = createCORSRequest('POST', url);
			if (!xhr) {
				alert('CORS not supported');
				return;
			}
			var formElement = document.getElementById(form);
			var formData = new FormData(formElement);
			// Response handlers.
			xhr.onload = function() {
				var response = JSON.parse(xhr.responseText);
				displayList(response, id);
				//document.getElementById("resultado").innerHTML = "Resultados encontrados:";
			};
			xhr.onerror = function() {
				alert('Woops, there was an error making the request.');
			};
			xhr.send(formData);
			document.getElementById("resultado").innerHTML = "Buscando...";
		}

		function displayList(arr, id) {
			//var str = JSON.stringify(arr, null, 4);
			//document.getElementById("resultado").innerHTML = 'JSON : ' + str;
			arr2 = arr;
			indice = 1;

			if (arr.Documentos == undefined) {
				document.getElementById("resultado").innerHTML = "No se encontraron resultados";
			}

			mostrarLista(id);

		}

		//"<p>Click para descargar</p> <a href= 'javascript:void(0)' onclick='activarDescarga(" + '"'+ arr.Documentos[i].url +'"' + ")' class='button worker-button-2'>Descargar</a>" +
	</script>




</body>
</html>